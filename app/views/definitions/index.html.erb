<script type="text/javascript">
	var Foo = {
		bar: function(evt) {
			document.body.style.backgroundColor = Foo.getColor();
		},
		
		getColor: function() {
			var color = [];
			for(var i=0; i<3; i++) {
				color.push(Math.ceil(Math.random() * 255));
			}
			return "rgb(" + color.join() + ")";
		},
		
		invertColor: function(rgbColor) {
			var match = rgbColor.match(/\d{1,3}/g);
			var color = [];
			for(var i=0; i<3; i++) {
				color.push(255 - parseInt(match[i]));
			}
			return "rgb(" + color.join() + ")";
		},
		
		unicorns: function()
		{
		  var emitUnicorn = function()
		  {
		    var img = document.createElement("IMG");
		    img.src = "/images/unicorn.png";
		    img.style.position = "fixed";
		    img.style.left = Math.floor(((Math.random() * window.innerWidth) * 0.60) + 0.20).toString() + "px";
		    img.style.top = Math.floor(((Math.random() * window.innerHeight) * 0.60) + 0.20).toString() + "px";
		    img.style.display = "none";
		    document.body.appendChild(img);
		    
		    img.onload = function() {
		      new Effect.Grow(img, {
		        duration: Math.random() * 5,
		        afterFinish: function() {
		          Effect.Fade(img, { afterFinish: function() {
		            document.body.removeChild(img);
		          } });
		        }
		      });
		    }
		  }
		  
		  setInterval(emitUnicorn, 1000);
		},
		
		lsd: function() {
			var effect = function() {
				var color = Foo.getColor();
				$(document.body).morph("Balls!  Something went wrong!", {
					style: "background: " + color + "; color: " + Foo.invertColor(color),
					duration: .5
				});
			};
			
			$(document.body).insert({
				top: (new Element("div", {style: "margin: 6em auto; width: 500px; font-size: 3em;"})).insert({
					top: "MemBrain sets the mood."})
			});
			
			setInterval(effect, 1000);
		}
	}

	<%= provide_jesture :color_change %>
</script>

<%= provide_jesture_tag :fight, :complainer, :fantasy, :mood_light %>